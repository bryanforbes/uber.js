<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>DOM Tests</title>

    <style>
        .error {
            color: red;
        }
    </style>

    <script src="../has.js/has.js"></script>
    <script src="../has.js/detect/bugs.js"></script>
    <script src="../has.js/detect/dom.js"></script>
    <script src="../has.js/detect/css.js"></script>
    <script src="../has.js/detect/function.js"></script>
    <script src="../has.js/detect/object.js"></script>
    <script src="../has.js/detect/events.js"></script>
    <script src="../has.js/detect/features.js"></script>
    <script src="../uber.js"></script>
    <script src="../src/function.js"></script>
    <script src="../src/object.js"></script>
    <script src="../src/promise.js"></script>
    <script src="../src/deferred.js"></script>
    <script src="../src/deferreds.js"></script>
    <script src="../src/dom.js"></script>
    <script src="../src/dom-event.js"></script>
    <script src="../src/html.js"></script>

    <script src="test.js"></script>

    <script>
        (function(){
            var te, container;
            registerTest("getDocument", function(){
                te = uber.byId("testelement");
                container = uber.byId("container");
                return isEqual(uber.getDocument(te), uber.getDocument(container));
            });
            registerTest("getWindow", function(){
                return isEqual(uber.getWindow(te), uber.getWindow(container))
            });
            registerTest("byId", function(){
                return te.id == "testelement";
            });
            registerTest("isDescendant", function(){
                return uber.isDescendant(uber.byId("child"), container);
            });
            registerTest("destroyElement", function(){
                uber.destroyElement(uber.byId("child"));
                return !uber.byId("child");
            });
            registerTest("destroyDescendants", function(){
                uber.destroyDescendants(uber.byId("destroy_container"));
                return !uber.byId("destroy_child");
            });

            var child1, child2, child3, child4, child5, child6, child7;

            registerTests("insertBefore", [
                function(){
                    child1 = document.createElement("div");
                    container.appendChild(child1);
                    child2 = document.createElement("div");
                    uber.insertBefore(child2, child1);
                    return child2 === container.firstChild;
                },
                function(){
                    child3 = document.createElement("div");
                    uber.insertBefore(child3, child1);
                    return child3 === child2.nextSibling;
                }
            ]);
            registerTests("insertAfter", [
                function(){
                    child4 = document.createElement("div");
                    uber.insertAfter(child4, child2);
                    return child4 === child2.nextSibling;
                },
                function(){
                    child5 = document.createElement("div");
                    uber.insertAfter(child5, child1);
                    return child5 === container.lastChild;
                }
            ]);
            registerTest("insertFirst", function(){
                child6 = document.createElement("div");
                uber.insertFirst(child6, container);
                return child6 === container.firstChild && child6.nextSibling === child2;
            });
            registerTest("insertOnly", function(){
                child7 = document.createElement("div");
                uber.insertOnly(child7, container);
                return child7 === container.firstChild && child7 === container.lastChild;
            });
            registerTest("replaceNode", function(){
                uber.replaceNode(child1, child7);
                return child1 === container.firstChild && child1 === container.lastChild;
            });
            registerTests("insertAtIndex", [
                function(){
                    uber.insertAtIndex(child2, container, 0);
                    return child2 === container.firstChild && child2.nextSibling === child1;
                },
                function(){
                    uber.insertAtIndex(child3, container, 17);
                    return child3 === container.lastChild && child1.nextSibling === child3;
                },
                function(){
                    uber.insertAtIndex(child4, container, 1);
                    return child2.nextSibling === child4 && child4.nextSibling === child1;
                }
            ]);
        })();
    </script>
</head>
<body>
    <ul id="output">
    </ul>
    <div id="TestElement"></div>
    <div id="testelement"></div>
    <div id="container" style="display: none;"><div id="child"></div></div>
    <div id="destroy_container" style="display: none;">
        <div id="destroy_child"></div>
    </div>
</body>
</html>
