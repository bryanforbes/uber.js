<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>DOM Tests</title>

    <style>
        .error {
            color: red;
        }
    </style>

    <script src="../has.js/has.js"></script>
    <script src="../has.js/detect/bugs.js"></script>
    <script src="../has.js/detect/dom.js"></script>
    <script src="../has.js/detect/css.js"></script>
    <script src="../has.js/detect/function.js"></script>
    <script src="../has.js/detect/object.js"></script>
    <script src="../has.js/detect/events.js"></script>
    <script src="../has.js/detect/features.js"></script>
    <script src="../uber.js"></script>
    <script src="../src/function.js"></script>
    <script src="../src/object.js"></script>
    <script src="../src/promise.js"></script>
    <script src="../src/deferred.js"></script>
    <script src="../src/deferreds.js"></script>
    <script src="../src/dom.js"></script>
    <script src="../src/dom-event.js"></script>
    <script src="../src/html.js"></script>

    <script src="test.js"></script>

    <script>
        function runTests(){
            var te = uber.byId("testelement"),
                container = uber.byId("container");

            outputResult("getDocument", ist(uber.getDocument(te), uber.getDocument(container)));
            outputResult("getWindow", ist(uber.getWindow(te), uber.getWindow(container)));
            outputResult("byId",  ist(te.id, "testelement"));
            outputResult("isDescendant", ist(uber.isDescendant(uber.byId("child"), container), true));

            uber.destroyElement(uber.byId("child"));
            outputResult("destroyElement", !uber.byId("child"));

            uber.destroyDescendants(uber.byId("destroy_container"));
            outputResult("destroyDescendants", !uber.byId("destroy_child"));

            var child1 = document.createElement("div");
            container.appendChild(child1);

            var child2 = document.createElement("div");
            uber.insertBefore(child2, child1);
            outputResult("insertBefore", child2 === container.firstChild);

            var child3 = document.createElement("div");
            uber.insertBefore(child3, child1);
            outputResult("insertBefore, again", child3 === child2.nextSibling);

            var child4 = document.createElement("div");
            uber.insertAfter(child4, child2);
            outputResult("insertAfter", child4 === child2.nextSibling);

            var child5 = document.createElement("div");
            uber.insertAfter(child5, child1);
            outputResult("insertAfter, again", child5 === container.lastChild);

            var child6 = document.createElement("div");
            uber.insertFirst(child6, container);
            outputResult("insertFirst", child6 === container.firstChild && child6.nextSibling === child2);

            var child7 = document.createElement("div");
            uber.insertOnly(child7, container);
            outputResult("insertOnly", child7 === container.firstChild && child7 === container.lastChild);

            uber.replaceNode(child1, child7);
            outputResult("replaceNode", child1 === container.firstChild && child1 === container.lastChild);

            uber.insertAtIndex(child2, container, 0);
            outputResult("insertAtIndex", child2 === container.firstChild && child2.nextSibling === child1);

            uber.insertAtIndex(child3, container, 17);
            outputResult("insertAtIndex, again", child3 === container.lastChild && child1.nextSibling === child3);

            uber.insertAtIndex(child4, container, 1);
            outputResult("insertAtIndex, once more", child2.nextSibling === child4 && child4.nextSibling === child1);
        }
    </script>
    <script>
        uber.domReady().then(function(){
            outputResult("domReady", true);
            runTests();
        });
    </script>
</head>
<body>
    <ul id="output">
    </ul>
    <div id="TestElement"></div>
    <div id="testelement"></div>
    <div style="display: none;">
        <input id="test_input" type="button">
    </div>
    <div id="container" style="display: none;"><div id="child"></div></div>
    <div id="destroy_container" style="display: none;">
        <div id="destroy_child"></div>
    </div>
</body>
</html>
